{"ast":null,"code":"var _jsxFileName = \"G:\\\\Newsbuzz-admin-web\\\\Newsbuzz-react\\\\src\\\\components\\\\complains.jsx\";\nimport React, { Component } from \"react\";\nimport { paginate } from \"../utils/paginate\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Pagination from \"./common/pagination\";\nimport ListGroup from \"./common/listGroup\";\nconst apiEndpoint = \"https://newsbuzz-server.herokuapp.com/api/display/react/registerEvent\";\n\nclass Complains extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      complains: [],\n      status: [{\n        _id: 0,\n        name: \"All\"\n      } // { _id: 1, name: \"Resolved!\" },\n      // { _id: 2, name: \"Pending...\" },\n      ],\n      pageSize: 5,\n      currentPage: 1\n    };\n\n    this.handleDelete = async complain => {\n      const originalComplains = this.state.complains;\n      const complains = this.state.complains.filter(c => c._id !== complain._id);\n      this.setState({\n        complains\n      });\n\n      try {\n        await axios.delete(apiEndpoint + \"/\" + complain._id);\n        toast.success(\"The complain was successfully deleted!\");\n      } catch (ex) {\n        toast.error(\"Failed to delete the complain!\");\n        this.setState({\n          complains: originalComplains\n        });\n      }\n    };\n\n    this.handlePageChange = page => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.handleStatusSelect = status => {\n      this.setState({\n        selectedStatus: status,\n        currentPage: 1\n      }); // console.log(this.state.selectedStatus);\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      data: complains\n    } = await axios.get(apiEndpoint);\n    this.setState({\n      complains\n    });\n    console.log(complains);\n  }\n\n  render() {\n    const {\n      complains: allComplains,\n      pageSize,\n      currentPage\n    } = this.state;\n    const filtered = this.state.selectedStatus && this.state.selectedStatus._id ? allComplains.filter(i => i.status === this.state.selectedStatus.name) : allComplains;\n    const complains = paginate(filtered, currentPage, pageSize);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ListGroup, {\n      items: this.state.status,\n      onItemSelect: this.handleStatusSelect,\n      selectedItem: this.state.selectedStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, \"Complains\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 19\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 19\n      }\n    }, \"Delete\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }, complains.map(complain => /*#__PURE__*/React.createElement(\"tr\", {\n      key: complain._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, complains.indexOf(complain)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `complaindetail/${complain._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 23\n      }\n    }, complain.Event_name)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, complain.status), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger\",\n      onClick: () => this.handleDelete(complain),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 23\n      }\n    }, \"Delete\")))))), /*#__PURE__*/React.createElement(Pagination, {\n      itemsCount: filtered.length,\n      pageSize: pageSize,\n      currentPage: currentPage,\n      onPageChange: this.handlePageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default Complains;","map":{"version":3,"sources":["G:/Newsbuzz-admin-web/Newsbuzz-react/src/components/complains.jsx"],"names":["React","Component","paginate","axios","Link","ToastContainer","toast","Pagination","ListGroup","apiEndpoint","Complains","state","complains","status","_id","name","pageSize","currentPage","handleDelete","complain","originalComplains","filter","c","setState","delete","success","ex","error","handlePageChange","page","handleStatusSelect","selectedStatus","componentDidMount","data","get","console","log","render","allComplains","filtered","i","map","indexOf","Event_name","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { paginate } from \"../utils/paginate\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport Pagination from \"./common/pagination\";\r\nimport ListGroup from \"./common/listGroup\";\r\nconst apiEndpoint =\r\n  \"https://newsbuzz-server.herokuapp.com/api/display/react/registerEvent\";\r\n\r\nclass Complains extends Component {\r\n  state = {\r\n    complains: [],\r\n    status: [\r\n      { _id: 0, name: \"All\" },\r\n      // { _id: 1, name: \"Resolved!\" },\r\n      // { _id: 2, name: \"Pending...\" },\r\n    ],\r\n    pageSize: 5,\r\n    currentPage: 1,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { data: complains } = await axios.get(apiEndpoint);\r\n    this.setState({ complains });\r\n    console.log(complains);\r\n  }\r\n\r\n  handleDelete = async (complain) => {\r\n    const originalComplains = this.state.complains;\r\n    const complains = this.state.complains.filter(\r\n      (c) => c._id !== complain._id\r\n    );\r\n\r\n    this.setState({ complains });\r\n\r\n    try {\r\n      await axios.delete(apiEndpoint + \"/\" + complain._id);\r\n      toast.success(\"The complain was successfully deleted!\");\r\n    } catch (ex) {\r\n      toast.error(\"Failed to delete the complain!\");\r\n      this.setState({ complains: originalComplains });\r\n    }\r\n  };\r\n\r\n  handlePageChange = (page) => {\r\n    this.setState({ currentPage: page });\r\n  };\r\n\r\n  handleStatusSelect = (status) => {\r\n    this.setState({ selectedStatus: status, currentPage: 1 });\r\n    // console.log(this.state.selectedStatus);\r\n  };\r\n\r\n  render() {\r\n    const { complains: allComplains, pageSize, currentPage } = this.state;\r\n\r\n    const filtered =\r\n      this.state.selectedStatus && this.state.selectedStatus._id\r\n        ? allComplains.filter(\r\n          (i) => i.status === this.state.selectedStatus.name\r\n        )\r\n        : allComplains;\r\n\r\n    const complains = paginate(filtered, currentPage, pageSize);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"row\">\r\n          <ToastContainer />\r\n          <div className=\"col-3\">\r\n            {\r\n              <ListGroup\r\n                items={this.state.status}\r\n                onItemSelect={this.handleStatusSelect}\r\n                selectedItem={this.state.selectedStatus}\r\n              />\r\n            }\r\n          </div>\r\n          <div className=\"col-9\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">#</th>\r\n                  <th scope=\"col\">Complains</th>\r\n                  {/* <th scope=\"col\">Posted by</th> */}\r\n                  <th scope=\"col\">Status</th>\r\n                  <th scope=\"col\">Delete</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {complains.map((complain) => (\r\n                  <tr key={complain._id}>\r\n                    <th scope=\"row\">{complains.indexOf(complain)}</th>\r\n                    <td>\r\n                      <Link to={`complaindetail/${complain._id}`}>\r\n                        {complain.Event_name}\r\n                      </Link>\r\n                    </td>\r\n                    {/* <td></td> */}\r\n                    <td>{complain.status}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn btn-danger\"\r\n                        onClick={() => this.handleDelete(complain)}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <Pagination\r\n              itemsCount={filtered.length}\r\n              pageSize={pageSize}\r\n              currentPage={currentPage}\r\n              onPageChange={this.handlePageChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Complains;\r\n"]},"metadata":{},"sourceType":"module"}