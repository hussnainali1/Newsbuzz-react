{"ast":null,"code":"var _jsxFileName = \"G:\\\\Newsbuzz-admin-web\\\\Newsbuzz-react\\\\src\\\\components\\\\registerForm.jsx\";\nimport React from 'react';\nimport Joi from 'joi-browser';\nimport Form from './common/form';\nimport * as userService from '../services/userService';\nimport auth from '../services/authService';\n\nclass RegisterForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        email: '',\n        password: '',\n        name: ''\n      },\n      errors: {}\n    };\n    this.schema = {\n      email: Joi.string().required().email().label('Email'),\n      password: Joi.string().required().min(5).label('Password'),\n      name: Joi.string().required().label('Name')\n    };\n\n    this.doSubmit = async () => {\n      // Call the server\n      try {\n        const response = await userService.register(this.state.data);\n        auth.loginWithJwt(response.headers['x-auth-token']);\n        window.location = '/';\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) {\n          const errors = { ...this.state.errors\n          };\n          errors.email = ex.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container my-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }\n    }, this.renderInput('email', 'Email'), this.renderInput('password', 'Password', 'password'), this.renderInput('name', 'Name'), this.renderButton('Register')));\n  }\n\n}\n\nexport default RegisterForm;","map":{"version":3,"sources":["G:/Newsbuzz-admin-web/Newsbuzz-react/src/components/registerForm.jsx"],"names":["React","Joi","Form","userService","auth","RegisterForm","state","data","email","password","name","errors","schema","string","required","label","min","doSubmit","response","register","loginWithJwt","headers","window","location","ex","status","setState","render","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAO,KAAKC,WAAZ,MAA6B,yBAA7B;AACA,OAAOC,IAAP,MAAiB,yBAAjB;;AAEA,MAAMC,YAAN,SAA2BH,IAA3B,CAAgC;AAAA;AAAA;AAAA,SAC/BI,KAD+B,GACvB;AACPC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,KAAK,EAAE,EAAT;AAAaC,QAAAA,QAAQ,EAAE,EAAvB;AAA2BC,QAAAA,IAAI,EAAE;AAAjC,OADC;AAEPC,MAAAA,MAAM,EAAE;AAFD,KADuB;AAAA,SAM/BC,MAN+B,GAMtB;AACRJ,MAAAA,KAAK,EAAEP,GAAG,CAACY,MAAJ,GACLC,QADK,GAELN,KAFK,GAGLO,KAHK,CAGC,OAHD,CADC;AAKRN,MAAAA,QAAQ,EAAER,GAAG,CAACY,MAAJ,GACRC,QADQ,GAERE,GAFQ,CAEJ,CAFI,EAGRD,KAHQ,CAGF,UAHE,CALF;AASRL,MAAAA,IAAI,EAAET,GAAG,CAACY,MAAJ,GACJC,QADI,GAEJC,KAFI,CAEE,MAFF;AATE,KANsB;;AAAA,SAoB/BE,QApB+B,GAoBpB,YAAY;AACtB;AACA,UAAI;AACH,cAAMC,QAAQ,GAAG,MAAMf,WAAW,CAACgB,QAAZ,CAAqB,KAAKb,KAAL,CAAWC,IAAhC,CAAvB;AACAH,QAAAA,IAAI,CAACgB,YAAL,CAAkBF,QAAQ,CAACG,OAAT,CAAiB,cAAjB,CAAlB;AACAC,QAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACA,OAJD,CAIE,OAAOC,EAAP,EAAW;AACZ,YAAIA,EAAE,CAACN,QAAH,IAAeM,EAAE,CAACN,QAAH,CAAYO,MAAZ,KAAuB,GAA1C,EAA+C;AAC9C,gBAAMd,MAAM,GAAG,EAAE,GAAG,KAAKL,KAAL,CAAWK;AAAhB,WAAf;AACAA,UAAAA,MAAM,CAACH,KAAP,GAAegB,EAAE,CAACN,QAAH,CAAYX,IAA3B;AACA,eAAKmB,QAAL,CAAc;AAAEf,YAAAA;AAAF,WAAd;AACA;AACD;AACD,KAjC8B;AAAA;;AAmC/BgB,EAAAA,MAAM,GAAG;AACR,wBACC;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKC,WAAL,CAAiB,OAAjB,EAA0B,OAA1B,CADF,EAEE,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CAFF,EAGE,KAAKA,WAAL,CAAiB,MAAjB,EAAyB,MAAzB,CAHF,EAIE,KAAKC,YAAL,CAAkB,UAAlB,CAJF,CAFD,CADD;AAWA;;AA/C8B;;AAkDhC,eAAezB,YAAf","sourcesContent":["import React from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Form from './common/form';\r\nimport * as userService from '../services/userService';\r\nimport auth from '../services/authService';\r\n\r\nclass RegisterForm extends Form {\r\n\tstate = {\r\n\t\tdata: { email: '', password: '', name: '' },\r\n\t\terrors: {}\r\n\t};\r\n\r\n\tschema = {\r\n\t\temail: Joi.string()\r\n\t\t\t.required()\r\n\t\t\t.email()\r\n\t\t\t.label('Email'),\r\n\t\tpassword: Joi.string()\r\n\t\t\t.required()\r\n\t\t\t.min(5)\r\n\t\t\t.label('Password'),\r\n\t\tname: Joi.string()\r\n\t\t\t.required()\r\n\t\t\t.label('Name')\r\n\t};\r\n\r\n\tdoSubmit = async () => {\r\n\t\t// Call the server\r\n\t\ttry {\r\n\t\t\tconst response = await userService.register(this.state.data);\r\n\t\t\tauth.loginWithJwt(response.headers['x-auth-token']);\r\n\t\t\twindow.location = '/';\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst errors = { ...this.state.errors };\r\n\t\t\t\terrors.email = ex.response.data;\r\n\t\t\t\tthis.setState({ errors });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='container my-5'>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('email', 'Email')}\r\n\t\t\t\t\t{this.renderInput('password', 'Password', 'password')}\r\n\t\t\t\t\t{this.renderInput('name', 'Name')}\r\n\t\t\t\t\t{this.renderButton('Register')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default RegisterForm;\r\n"]},"metadata":{},"sourceType":"module"}